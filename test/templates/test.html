<!DOCTYPE html>
<html>
<head>
    <title>首頁</title>
    <meta charset="UTF-8" />
      <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <!-- <link rel="stylesheet" type="text/css" href=".//static/css/main.css"> -->
</head>
<body>
  <div class="select_container">
    <div class="select_text">請選擇社群平台:</div>
    <select class="select">
        <option>Global</option>
        <option>Fb</option>
        <option>Ig</option>
        <option>PTT</option>
        <option>UDN</option>
        <option>mobile01</option>
        <option>Dcard</option>
    </select>
  </div>
  <div class="container Content">
    <div class="g_title">關鍵字權重比例</div>
    <div class="graph_container">
      <div class="graph3">
        <div id="main3" style="height: 300px"></div>
      </div>
    </div>
  </div>
  <!-- wordpie chart -->
  <!-- <script src="./../static/js/echarts-charts/wordpie-chart.js" type="text/javascript"></script> -->
  <script src='https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js'></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
  <script type="text/javascript">
    $.getJSON("./../kol_data.json", function(json) {
        console.log(json); // this will show the info it in firebug console
    });

    var chartDom = document.getElementById('main3');
    var myChart = echarts.init(chartDom);
    var option;
    var data;
    var data1;
    var data2;
     window.addEventListener('resize', ()=> {
      // myChart.resize()
      echarts.init(document.getElementById('main3')).resize()
    })
    data = [
       {value: 10408, name: '數位'},
       {value: 735, name: '社群'},
       {value: 580, name: '行銷'},
       {value: 484, name: '精準'},
       {value: 300, name: '痛點'}
    ]
    data1 = [
       {value: 408, name: '數位'},
       {value: 1735, name: '社群'},
       {value: 580, name: '行銷'},

    ]
    data2 = [
       {value: 1008, name: '數位'},
       {value: 235, name: '社群'},
       {value: 580, name: '行銷'},
       {value: 484, name: '精準'},
       {value: 1300, name: '痛點'},
       {value: 300, name: '轉型'}
    ]
    option = {
        tooltip: {
            trigger: 'item'
        },
        legend: {
            // orient: 'vertical',
            left: 'left',
        },
        series: [
            {
                name: '關鍵字',
                type: 'pie',
                radius: ['30%', '60%'],
                avoidLabelOverlap: false,
                itemStyle: {
                    borderRadius: 10,
                    borderColor: '#fff',
                    borderWidth: 2
                },
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '16',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: [
                    {value: 1048, name: '數位'},
                    {value: 735, name: '社群'},
                    {value: 580, name: '行銷'},
                    {value: 484, name: '精準'},
                    {value: 300, name: '痛點'}
                ]
            }
        ]
    };

    option && myChart.setOption(option);

    $( ".select" ).change(function() {
        $(".select").find(":selected").each(function() {
            // alert(this.value);   //  值
            console.log(this.value)
            if (this.value == 'Fb') {
                option.series[0].data = data
            }else if (this.value == 'Ig'){
                option.series[0].data = data1
            }else if (this.value == 'PTT'){
                option.series[0].data = data2     
            }else{
                option.series[0].data = data
            }
      }); 
      // console.log(option.series[0].data)
      option && myChart.setOption(option);
    });
    // console.log(option.series[0].data)
  </script>
</body>
</html>