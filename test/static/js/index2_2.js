var construct_ratio_data = {
	"威士忌":{
		"week":{
			"dcard":{
				"positive":0.5681818181818182,
				"negative":0.17045454545454544,
				"neutral":0.26136363636363635,
			},
			"ptt":{
				"positive":0.8,
				"negative":0.0,
				"neutral":0.2,
			},
			"fb":{
				"positive":0.5701357466063348,
				"negative":0.2081447963800905,
				"neutral":0.22171945701357465,
			},
		},
		"month":{
			"dcard":{
				"positive":0.5555555555555556,
				"negative":0.18803418803418803,
				"neutral":0.2564102564102564,
			},
			"ptt":{
				"positive":0.6,
				"negative":0.26666666666666666,
				"neutral":0.13333333333333333,
			},
			"fb":{
				"positive":0.5992438563327032,
				"negative":0.19092627599243855,
				"neutral":0.20982986767485823,
			},
		},
		"half_year":{
			"dcard":{
				"positive":0.6874125874125874,
				"negative":0.13006993006993006,
				"neutral":0.1825174825174825,
			},
			"ptt":{
				"positive":0.6,
				"negative":0.21904761904761905,
				"neutral":0.18095238095238095,
			},
			"fb":{
				"positive":0.6082910321489001,
				"negative":0.15651438240270726,
				"neutral":0.23519458544839256,
			},
		},
	},
    "啤酒":{
        "week":{
            "dcard":{
                "positive":0.7142857142857143,
                "negative":0.16666666666666666,
                "neutral":0.11904761904761904,
            },
            "ptt":{
                "positive":1.0,
                "negative":0.0,
                "neutral":0.0,
            },
            "fb":{
                "positive":0.5764192139737991,
                "negative":0.13537117903930132,
                "neutral":0.28820960698689957,
            },
        },
        "month":{
            "dcard":{
                "positive":0.6666666666666666,
                "negative":0.16666666666666666,
                "neutral":0.16666666666666666,
            },
            "ptt":{
                "positive":1.0,
                "negative":0.0,
                "neutral":0.0,
            },
            "fb":{
                "positive":0.5787187839305103,
                "negative":0.13463626492942454,
                "neutral":0.28664495114006516,
            },
        },
        "half_year":{
            "dcard":{
                "positive":0.6532663316582915,
                "negative":0.16080402010050251,
                "neutral":0.18592964824120603,
            },
            "ptt":{
                "positive":0.48484848484848486,
                "negative":0.21212121212121213,
                "neutral":0.30303030303030304,
            },
            "fb":{
                "positive":0.6144578313253012,
                "negative":0.14967562557924002,
                "neutral":0.23586654309545876,
            },
        },

    },
    "清酒":{
        "week":{
            "dcard":{
                "positive":0.7142857142857143,
                "negative":0.09523809523809523,
                "neutral":0.19047619047619047,
            },
            "ptt":{
                "positive":1.0,
                "negative":0.0,
                "neutral":0.0,
            },
            "fb":{
                "positive":0.0,
                "negative":0.0,
                "neutral":1.0,
            },
        },
        "month":{
            "dcard":{
                "positive":0.7142857142857143,
                "negative":0.09523809523809523,
                "neutral":0.19047619047619047,
            },
            "ptt":{
                "positive":0.5,
                "negative":0.0,
                "neutral":0.5,
            },
            "fb":{
                "positive":0.0,
                "negative":0.0,
                "neutral":1.0,
            },
        },
        "half_year":{
            "dcard":{
                "positive":0.5178316690442225,
                "negative":0.1398002853067047,
                "neutral":0.34236804564907275,
            },
            "ptt":{
                "positive":0.42105263157894735,
                "negative":0.21052631578947367,
                "neutral":0.3684210526315789,
            },
            "fb":{      
                "positive":0.625,
                "negative":0.125,
                "neutral":0.25,
            },
        },

    },
    "伏特加":{
        "week":{
            "dcard":{
                "positive":0.75,
                "negative":0.08333333333333333,
                "neutral":0.16666666666666666,
            },
            "ptt":{
                "positive":1.0,
                "negative":0.0,
                "neutral":0.0,
            },
            "fb":{
                "positive":0.7,
                "negative":0.03333333333333333,
                "neutral":0.26666666666666666,
            },
        },
        "month":{
            "dcard":{
                "positive":0.5348837209302325,
                "negative":0.23255813953488372,
                "neutral":0.23255813953488372,
            },
            "ptt":{
                "positive":1.0,
                "negative":0.0,
                "neutral":0.0,
            },
            "fb":{
                "positive":0.7,
                "negative":0.03333333333333333,
                "neutral":0.26666666666666666,
            },
        },
        "half_year":{
            "dcard":{
                "positive":0.5904761904761905,
                "negative":0.1746031746031746,
                "neutral":0.23492063492063492,
            },
            "ptt":{
                "positive":0.7692307692307693,
                "negative":0.15384615384615385,
                "neutral":0.07692307692307693,
            },
            "fb":{              
                "positive":0.6358974358974359,
                "negative":0.09230769230769231,
                "neutral":0.2717948717948718,
            },
        },

    },
    "葡萄酒":{
        "week":{
            "dcard":{
                "positive":0.5952380952380952,
                "negative":0.09523809523809523,
                "neutral":0.30952380952380953,
            },
            "ptt":{
                "positive":0.0,
                "negative":0.5,
                "neutral":0.5,
            },
            "fb":{
                "positive":0.8695652173913043,
                "negative":0.10869565217391304,
                "neutral":0.021739130434782608,
            },
        },
        "month":{
            "dcard":{
                "positive":0.6,
                "negative":0.13333333333333333,
                "neutral":0.26666666666666666,
            },
            "ptt":{
                "positive":0.25,
                "negative":0.5,
                "neutral":0.5,
            },
            "fb":{
                "positive":0.8923076923076924,
                "negative":0.07692307692307693,
                "neutral":0.03076923076923077,
            },
        },
        "half_year":{
            "dcard":{
                "positive":0.7059961315280464,
                "negative":0.12959381044487428,
                "neutral":0.1644100580270793,
            },
            "ptt":{
                "positive":0.4444444444444444,
                "negative":0.2962962962962963,
                "neutral":0.25925925925925924,
            },
            "fb":{
                "positive":0.8678414096916299,
                "negative":0.022026431718061675,
                "neutral":0.11013215859030837,
            },
        },

    },
}

$(document).ready(function(){
    // main1_chart('威士忌')
    // g1_change('威士忌')
    main3_1Charts("威士忌",'week')
    main3_2Charts("威士忌",'week')
    main3_3Charts("威士忌",'week')
})

$(".g3_select").change(function() {
    $(".g3_select").find(":selected").each(function() {
        // console.log(this.value)
        // console.log($('select').val())
        main3_1Charts($('select').val(),this.value)
        main3_2Charts($('select').val(),this.value)
        main3_3Charts($('select').val(),this.value)
    })
})

// ch3_1
$(".select").change(function() {
    $(".select").find(":selected").each(function() {
        // console.log(this.value)
        // console.log($('select').val())
        main3_1Charts(this.value,$('.g3_select').val())
        main3_2Charts(this.value,$('.g3_select').val())
        main3_3Charts(this.value,$('.g3_select').val())
    })
})


function main3_1Charts(al_type,time_range){
    var chartDom = document.getElementById('main3_1');
    var myChart = echarts.init(chartDom);
    var option;
    var posneg_ratio_data;
     window.addEventListener('resize', ()=> {
        // myChart.resize()
        echarts.init(document.getElementById('main3_1')).resize()
    })
    fb_data = [
                 {value: construct_ratio_data[al_type][time_range]['fb']['positive'].toFixed(2), name: '正向'},
                 {value: construct_ratio_data[al_type][time_range]['fb']['negative'].toFixed(2), name: '負向'},
                 {value: construct_ratio_data[al_type][time_range]['fb']['neutral'].toFixed(2), name: '中立'},
             ]
    // console.log(fb_data)
    option = {
        title: {
            text: 'Facebook',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        // legend: {
        //     // orient: 'vertical',
        //     bottom: 0,
        // },
        series: [
            {
                name: 'Facebook',
                type: 'pie',
                radius: ['30%', '60%'],
                avoidLabelOverlap: false,
                itemStyle: {
                    borderRadius: 10,
                    borderColor: '#fff',
                    borderWidth: 2
                },
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '16',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: fb_data
            }
        ]
    };

    option && myChart.setOption(option);
}

// ch3_2
function main3_2Charts(al_type,time_range){
    var chartDom = document.getElementById('main3_2');
    var myChart = echarts.init(chartDom);
    var option;
    var posneg_ratio_data;
     window.addEventListener('resize', ()=> {
        // myChart.resize()
        echarts.init(document.getElementById('main3_2')).resize()
    })
    ptt_data = [
                 {value: construct_ratio_data[al_type][time_range]['ptt']['positive'].toFixed(2), name: '正向'},
                 {value: construct_ratio_data[al_type][time_range]['ptt']['negative'].toFixed(2), name: '負向'},
                 {value: construct_ratio_data[al_type][time_range]['ptt']['neutral'].toFixed(2), name: '中立'},
             ]
    // console.log(fb_data)
    option = {
        title: {
            text: 'Ptt',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        legend: {
            // orient: 'vertical',
            bottom: 0,
        },
        series: [
            {
                name: 'Ptt',
                type: 'pie',
                radius: ['30%', '60%'],
                avoidLabelOverlap: false,
                itemStyle: {
                    borderRadius: 10,
                    borderColor: '#fff',
                    borderWidth: 2
                },
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '16',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: ptt_data
            }
        ]
    };

    option && myChart.setOption(option);
}

// ch3_3
function main3_3Charts(al_type,time_range){
    var chartDom = document.getElementById('main3_3');
    var myChart = echarts.init(chartDom);
    var option;
    var posneg_ratio_data;
     window.addEventListener('resize', ()=> {
        // myChart.resize()
        echarts.init(document.getElementById('main3_3')).resize()
    })
    dcard_data = [
                 {value: construct_ratio_data[al_type][time_range]['dcard']['positive'].toFixed(2), name: '正向'},
                 {value: construct_ratio_data[al_type][time_range]['dcard']['negative'].toFixed(2), name: '負向'},
                 {value: construct_ratio_data[al_type][time_range]['dcard']['neutral'].toFixed(2), name: '中立'},
             ]
    // console.log(fb_data)
    option = {
        title: {
            text: 'Dcard',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        // legend: {
        //     // orient: 'vertical',
        //     bottom: 0,
        // },
        series: [
            {
                name: 'Dcard',
                type: 'pie',
                radius: ['30%', '60%'],
                avoidLabelOverlap: false,
                itemStyle: {
                    borderRadius: 10,
                    borderColor: '#fff',
                    borderWidth: 2
                },
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '16',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: dcard_data
            }
        ]
    };

    option && myChart.setOption(option);
}